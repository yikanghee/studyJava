<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<th:block th:fragment="setRegister(register)">
    <body>
    <div class="member_login">
        <form>
            <div class="form-group">
                <label for="createEmail">이메일</label>
                <input id="createEmail" class="form-control" placeholder="이메일을 입력해주세요" type="text">
            </div>
            <div class="form-group">
                <label for="createLogin">아이디</label>
                <input id="createLogin" class="form-control" placeholder="아이디를 입력해주세요" type="text">
            </div>
            <div class="form-group">
                <label for="createPassword">비밀번호</label>
                <input id="createPassword" class="form-control" placeholder="비밀번호를 입력해주세요" type="text">
            </div>
            <div class="form-group">
                <label for="checkPassword">비밀번호 확인</label>
                <input id="checkPassword" class="form-control" placeholder="비밀번호를 다시 입력해주세요" type="text">
            </div>
            <div class="form-group">
                <button class="btn btn-info btn-lg btn-block" onclick="postRegister(event)">회원가입</button>
            </div>
        </form>
    </div>
    <script>

        const postRegister = (event) => {
            event.preventDefault();
            const email = document.querySelector('#createEmail').value;
            const userId = document.querySelector('#createLogin').value;
            const password = document.querySelector('#createPassword').value;
            const send_param = (
                email, userId, password
            );
            axios.post('/member/register', send_param)
                .then(function (response) {
                    console.log(response);
                    alert("로그인 성공했습니다");
                    location.href = '/posts';
                })
                .catch(function (error) {
                    console.log(error);
                });
        };

    </script>
    </body>
</th:block>
</html>